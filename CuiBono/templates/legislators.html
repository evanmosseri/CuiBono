{% extends "index.html" %}

{%block morecss%}
<style>
.table.table-responsive tr th{
  text-align: center;
}
</style>
{%endblock%}

{% block outerContent %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <header class="intro">
        <div class="intro-body">
<div class="container">
  <h2>Legislators</h2>
  <table id="legislatorsTable" class="table table-responsive" style="">
    <thead>
      <tr>
        <th>Name</th>
        <th><a href="/legislators?sort=id">ID</a></th>
        <th><a href="/legislators?sort=filer_id">Filer ID</a></th>
        <th><a href="/legislators?sort=district">District</a></th>
        <th><a href="/legislators?sort=party">Party</a></th>
        <th>Offices</th>
        <th><a href="/legislators?sort=sources">Sources</a></th>
      </tr>
    </thead>
    {% for legis in legislators %}
      {% if legis.first_name%}
      <tr>
        <td><a href="/legislators/{{legis.id}}">{{legis.first_name}} &nbsp {{legis.last_name}}</a></td>
        <td>{{legis.id}}</td>
        <td>{{legis.filer_id}}</td>
        <td>{%if legis.district == -1%}
                N/A
              {%else%}
                {{legis.district}}
              {%endif%}</td>
        <td>{{legis.party}}</td>
        <td>
            <table>
                {%for row in legis.offices%}
                    {% for col in row %}
                      {%if row[col] != None %}
                        <tr>
                          <td class="col-sm-4" style="text-align: left;">{{col}}:</td>
                          <td class="col-sm-8">{{row[col]}}</td>
                        </tr>
                      {%endif%}
                    {% endfor %}
                {%endfor%}
            </table>
        </td>
        <td>
        <div class="row">
            <table>
                {%for row in legis.sources%}
                    {% for col in row %}
                          {%if col == "url"%}
                            <tr>
                              <td class="col-sm-6" style="text-align: left;">{{col}}:</td>
                              <td class="col-sm-6"><a href="{{row[col]}}">{{row[col]}}</a></td>
                            </tr>
                          {%else%}
                            <tr>
                              <td class="col-sm-6" style="text-align: left;">{{col}}:</td>
                              <td class="col-sm-6">{{row[col]}}</td>
                            </tr>
                          {%endif%}
                    {% endfor %}
                {%endfor%}
            </table>
        </div>

        </td>

      </tr>
      {%endif%}
      {% endfor %}
  </table>
  <div>
      <a href="{{prev_page}}">Previous</a>
      <a href="{{next_page}}">Next</a>
  </div>
</div>
</div>
</header>

{% endblock %}
